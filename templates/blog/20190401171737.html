<h2>viで基本的なコマンドを覚えよう</h2>


　viで最低限必要なことを覚えておけば、設定ファイルのの編集ができるようになるから、次の章に進むのもよいと思う。ここでは、もう少し便利にviを使う方法を紹介したいと思います。

<h3>行番号がないなぁ</h3>

　viを起動すると行番号がないのに気づきますね。行番号がないと何かと不便ですね。そのような場合は以下のようにします。

　まずEscキーを押してコマンドモードにしてください。その後に以下のように入力してEnterを押してください。
<pre>
:set number
</pre>
　するとびっくり、行番号が左にでてきます。

<h3>うおー、viを再起動したら行番号が消えてしまった</h3>

　上記のコマンドは永続的に続くものじゃなくって、viを立ち上げている間だけ効力があります。そういう場合は、<b>設定ファイル</b>を使います。設定ファイルに記述しておけば、viを立ち上げたときにそのコマンドを実行してくれます。

　viの設定ファイルはユーザーのホームディレクトリにある<b>.vimrc</b>です。そんなファイルはないって? デフォルトでは存在しないので作成する必要がありますね。

<pre>
cd ~
vi .vimrc
</pre>

　<b>cd ~</b>とすることで、ホームディレクトリに移動することができます。チルダはユーザーのホームディレクトリを意味する特殊文字です。

　viを使って<b>.vimrc</b>を作成しましょう。そして<b>i</b>を押して、編集モードになったら次のように入力しましょう。

<pre>
set number
</pre>
　viの設定ファイルに書く場合は、コロンは先頭にはいりません。コロンなしで書きます。そしたらEscを押してコマンドモードになって、<b>:wq</b>と入力して保存して終了しましょう。するとファイルができています。

　Linuxでは<b>.</b>で始まるファイルは隠しファイルになります。設定ファイルは隠しファイルであることが多いです。通常の<b>ls</b>コマンドでは、ファイルに一覧されませんが<b>a</b>オプションを使うと隠しファイルを含めて見ることができます。

<pre>
ls -a
</pre>

　これで.vimrcというファイルができていることが確認できましたね。viでテキストファイルを開いてみましょう。行番号が最初から表示されるのがわかると思います。

<h3>タブで空白入力したい</h3>
　プログラマであれば、タブではなくって、タブキーで空白入力したい人も多いでしょう。

<pre>
set expandtab
</pre>

<h3>タブ幅を設定したい</h3>

　プログラマであればタブ幅も設定したいですね。
<pre>
set tabstop=2
</pre>

<h3>改行したときに字下げをしたい</h3>

　プログラマであれば改行したときに、先頭に戻るのではなくって、字下げをしたいですね。
<pre>
set autoindent
</pre>

<h3>設定ファイルが大きいので、ファイルの末尾に移動したいぞ</h3>

　末尾に移動したい場合はコマンドモードで<b>G</b>と打ちます。

<pre>
G
</pre>

<h3>好きな行番号に移動したいぞ</h3>

　好きな行番号に移動したい場合は<b>数値G</b>とします。

<pre>
1G
25G
</pre>

　1Gだと1行目、25Gだと25行目に移動できます。

Escキーでコマンドモードにして、行番号を打つだけでも移動できます。

<pre>
:3
</pre>

<h3>文字列を検索したいぞ</h3>

　検索したい場合はまずコマンドモードで、<b>/</b>と打ちます。スラッシュを打ちます。すると以下のようになります。

<pre>
/
</pre>
　そうしたらここに検索したい文字を打ち込みます。

<pre>
/foo
</pre>
　そうしたらEnterと押してください。これで検索ができます。次のマッチした位置に進みたいときは<b>n</b>を押します。戻りたい時は<b>N</b>を押します。これで検索ができます。

<pre>
n 進む
N 戻る
</pre>

<h3>コピーしたいぞ</h3>

　ちょっとまってください。この後にSSHを解説するときにTeratermというツールを紹介します。これを使うと、文字列を選択してコピーすることができます。

<h3>ペーストしたい</h3>

　これもTeratermを紹介するまで少しお待ちください。右クリックでペーストできます。

<h3>たくさんの範囲を削除したい</h3>

　deleteやback spaceでも削除できますが、いっぺんにたくさんの範囲を消したい場合がありますね。1行削除はコマンドモードで次のように打ちます。

<pre>
dd
</pre>

　複数行を削除したい場合はこの直前に、削除したい行数を記述します。

<pre>
5dd
</pre>

<h3>Perlを実行したいぞ</h3>

　サンプルコードにPerl入門ということで、viからperlを実行する方法を最後に紹介!

<pre>
!perl スクリプト名
</pre>

　これだけ覚えれば、設定ファイルの編集がだいぶ楽になると思います。
